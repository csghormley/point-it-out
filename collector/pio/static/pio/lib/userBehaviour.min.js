/**
 * @author Taha Al-Jody <taha@ta3design.com>
 * https://github.com/TA3/web-user-behaviour
 */
var userBehaviour=function(){var e={userInfo:!0,clicks:!0,mouseMovement:!0,mouseMovementInterval:1,mouseScroll:!0,mousePageChange:!0,timeCount:!0,clearAfterProcess:!0,processTime:15,processData:function(e){console.log(e)}},o={},s={processInterval:null,mouseInterval:null,mousePosition:[],eventListeners:{scroll:null,click:null,mouseMovement:null},eventsFunctions:{scroll(){n.mouseScroll.push([window.scrollX,window.scrollY,c()])},click(e){n.clicks.clickCount++;var o=[],s="";e.composedPath().forEach((n,t)=>{t!==e.composedPath().length-1&&t!==e.composedPath().length-2&&(s=n.localName,""!==n.className&&n.classList.forEach(e=>{s+="."+e}),""!==n.id&&(s+="#"+n.id),o.push(s))}),o=o.reverse().join(">"),n.clicks.clickDetails.push([e.clientX,e.clientY,o,c()])},mouseMovement(e){s.mousePosition=[e.clientX,e.clientY,c()]}}},n={};function t(){n={userInfo:{appCodeName:navigator.appCodeName||"",appName:navigator.appName||"",vendor:navigator.vendor||"",platform:navigator.platform||"",userAgent:navigator.userAgent||""},time:{startTime:0,currentTime:0},clicks:{clickCount:0,clickDetails:[]},mouseMovements:[],mouseScroll:[],contextChange:[]}}function c(){return Date.now()}function i(){return!1===o.userInfo&&void 0!==userBehaviour.showResult().userInfo&&delete userBehaviour.showResult().userInfo,void 0!==o.timeCount&&o.timeCount&&(n.time.currentTime=c()),n}return t(),{showConfig:function s(){return Object.keys(o).length!==Object.keys(e).length?e:o},config:function s(n){o={},Object.keys(e).forEach(s=>{s in n?o[s]=n[s]:o[s]=e[s]})},start:function t(){Object.keys(o).length!==Object.keys(e).length&&(console.log("no config provided. using default.."),o=e),void 0!==o.timeCount&&o.timeCount&&(n.time.startTime=c()),o.mouseMovement&&(s.eventListeners.mouseMovement=window.addEventListener("mousemove",s.eventsFunctions.mouseMovement),s.mouseInterval=setInterval(()=>{s.mousePosition&&s.mousePosition.length&&(!n.mouseMovements.length||s.mousePosition[0]!==n.mouseMovements[n.mouseMovements.length-1][0]&&s.mousePosition[1]!==n.mouseMovements[n.mouseMovements.length-1][1])&&n.mouseMovements.push(s.mousePosition)},1e3*e.mouseMovementInterval)),o.clicks&&(s.eventListeners.click=window.addEventListener("click",s.eventsFunctions.click)),o.mouseScroll&&(s.eventListeners.scroll=window.addEventListener("scroll",s.eventsFunctions.scroll)),!1!==o.processTime&&(s.processInterval=setInterval(()=>{o.processData(i())},1e3*o.processTime))},stop:function e(){!1!==o.processTime&&clearInterval(s.processInterval),clearInterval(s.mouseInterval),window.removeEventListener("scroll",s.eventsFunctions.scroll),window.removeEventListener("click",s.eventsFunctions.click),window.removeEventListener("mousemove",s.eventsFunctions.mouseMovement)},showResult:i,processResults:function e(){o.processData(i()),o.clearAfterProcess&&t()}}}();
